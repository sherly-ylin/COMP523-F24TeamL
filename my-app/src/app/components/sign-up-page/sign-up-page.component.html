<div class="sign-up-page">
  <img
    src="https://www.med.unc.edu/psych/wp-content/uploads/sites/839/2020/03/psychiatry.png"
  />
  <h1>Sign Up</h1>
  <form (ngSubmit)="onSubmit()">
    <mat-form-field class="form-field">
      <mat-label>Username</mat-label>
      <input
        matInput
        [(ngModel)]="username"
        name="username"
        placeholder="Optional, the default username is your email"
      />
      <mat-error></mat-error>
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label>Password:</mat-label>
      <input
        matInput
        type="password"
        [(ngModel)]="password"
        name="password"
        (focus)="passwordGainFocus()"
        (blur)="passwordLostFocus()"
      />
      @if (
        (password && !passwordRequirementsSatisfied() && !passwordHasFocus) ||
        (!password && submitted)
      ) {
        <mat-error>A valid password is required!</mat-error>
      }
      @if (passwordHasFocus && password) {
        <div>
          <mat-error [class]="passwordIsLongEnough() ? 'correct' : 'error'">
            @if (passwordIsLongEnough()) {
              ✓
            }
            Password should include at least
            {{ PASSWORD_MIN_LENGTH }} characters.
          </mat-error>
          <mat-error [class]="passwordHasUpperCase() ? 'correct' : 'error'">
            @if (passwordHasUpperCase()) {
              ✓
            }
            Password should include at least {{ PASSWORD_MIN_UPPER }} uppercase
            letter.
          </mat-error>
          <mat-error [class]="passwordHasLowerCase() ? 'correct' : 'error'">
            @if (passwordHasLowerCase()) {
              ✓
            }
            Password should include at least {{ PASSWORD_MIN_LOWER }} lowercase
            letter.
          </mat-error>
          <mat-error [class]="passwordHasNumber() ? 'correct' : 'error'">
            @if (passwordHasNumber()) {
              ✓
            }
            Password should include at least
            {{ PASSWORD_MIN_NUMBER }} number.
          </mat-error>
          <mat-error [class]="passwordHasSymbol() ? 'correct' : 'error'">
            @if (passwordHasSymbol()) {
              ✓
            }
            Password should include at least
            {{ PASSWORD_MIN_SYMBOL }} symbol.
          </mat-error>
        </div>
      }
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label>Confirm Password:</mat-label>
      <input
        matInput
        type="password"
        [(ngModel)]="confirmPassword"
        name="confirmPassword"
        (focus)="confirmPasswordGainFocus()"
        (blur)="confirmPasswordLostFocus()"
      />
      @if (
        confirmPassword &&
        passwordRequirementsSatisfied() &&
        password != confirmPassword
      ) {
        <mat-error class="error">Passwords do not match!</mat-error>
      }
    </mat-form-field>

    <button mat-flat-button type="submit">Sign Up</button>
  </form>
</div>
